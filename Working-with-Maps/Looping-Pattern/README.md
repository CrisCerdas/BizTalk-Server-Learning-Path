# BizTalk Mapper Patterns: Looping Pattern

# Introduction
When exchanging messages in an Enterprise application integration (EAI) or Business-to-Business (B2B) some scenarios need to deal with more complicated types of data manipulation can only reasonably be done using recurring records or elements (type of arrays in XML documents). These two types are extremely useful when manipulating large number of data. And a combination of this of Arrays and Loop operations can save you incredible amounts of time when performing certain types of repetitive transformations.

Is this scenarios we can say that:
* An array is a set of records or elements that are linked together because they represent similar things. The purpose of the array is to provide a single name that can be used by the Mapper to access any of the entire set of elements.
* A loop is used to tell the BizTalk Mapper to perform a set of procedures a specified number of times. Often times we need to perform the same transformation on a large number of values. By using a loop we only need to define the transformation once, and can tell it to do the same thing to all the elements using a loop.

# Building the Sample

Understanding the foundations on how the BizTalk Mapper engine will handle loops is one of the best way to full understand how to apply some of the best practices or techniques to solve looping problems and to understand the looping constructs that are generated by the mapper engine.
* We are not required to use the Looping Functoid to implement loops. The BizTalk Mapper engine will automatically infer looping based in the source schema structure;
* Sometimes the presumptions that the engine will make are not correct and the use of the Looping Functoid will override the inference made by the mapper engine, forcing the mapping engine to generate the XSLT code based on the Looping functoid rather than the schema structure;
* However in some complex looping situations, no matter whether we use or not the Looping Functoid, the mapper engine can be induced by some kind of rules conflict and produce an unexpected XSLT Code. in this cases we should use custom XSLT code and in some situations we can make use of the Table Looping Functoid.
 
# Read more about it
You can read more about this topic here: [BizTalk Mapping Patterns and Best Practices book [Free] released](https://blog.sandro-pereira.com/2014/09/28/biztalk-mapping-patterns-and-best-practices-book-free-released/)

# About Me
**Sandro Pereira** | [DevScope](http://www.devscope.net/) | MVP & MCTS BizTalk Server 2010 | [https://blog.sandro-pereira.com/](https://blog.sandro-pereira.com/) | [@sandro_asp](https://twitter.com/sandro_asp)

